<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="Down On Life">
    

    <!--Author-->
    
        <meta name="author" content="John Doe">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="体验Tcl语言"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="Down On Life" />
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Color-Blind的笔记"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>体验Tcl语言 - Color-Blind的笔记</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2017/01/25/体验Tcl语言/">
                体验Tcl语言
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2017-01-25</span>
            
            <a href="#disqus_thread" class="comments">留言</a>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <hr>
<h2 id="Tcl脚本初体验"><a href="#Tcl脚本初体验" class="headerlink" title="Tcl脚本初体验"></a>Tcl脚本初体验</h2><p>Tcl（发音 tickle）是一种脚本语言。学习它的目的在于有本书上有这个语言的代码。但是过于老旧，无法运行了，想要自己修改下。:)</p>
<h4>Tcl 的特性包括：</h4>

<li>任何东西都是一条命令，包括语法结构（for、if 等），以波兰表示法书写。</li><br><li>命令通常可变。</li><br><li>任何事物都可以重新定义和重载。</li><br><li>所有的数据类型都可以看作字符串，包括源代码。</li><br><li>拥有完全动态、基于类的对象系统 TclOO，支持包括元类、过滤器和mixin在内的高级功/能。</li><br><li>提供事件驱动给套接字和文件。基于时间或者用户定义的事件也可以。</li><br><li>默认的变量作用域是词法作用域，但 uplevel 和 upvar 允许过程与封闭的函数作用域/交互。</li><br><li>所有的内置命令会在误用时产生错误消息。</li><br><li>很容易用 C、C++ 或者 Java 扩展。</li><br><li>解释语言，支持字节码。</li><br><li>完全的 Unicode （3.1）支持，1999 年首次发布。</li><br><li>跨平台。支持 Win32、UNIX、Linux、Mac 等。</li><br><li>代码紧凑，易于维护。</li>

<p>其实Tcl最大的特性在于它是一种字符串语言，几乎东西都默认为字符串。</p>
<h4>Wiki示例</h4>

<p><a href="!https://zh.wikipedia.org/wiki/Tcl">维基百科</a>给出了两个示例，可以体验一下Tcl的强大:</p>
<p>echo_server.tcl:</p>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/bin/sh</span></div><div class="line"><span class="comment">#Tcl ingores the next line but 'sh' doesn't \</span></div><div class="line"><span class="keyword">exec</span> tclsh $<span class="number">0</span> $&#123;<span class="number">1</span>+<span class="string">"$@"</span>&#125;</div><div class="line"></div><div class="line"><span class="comment"># echo服务器可以处理并发请求</span></div><div class="line"></div><div class="line"><span class="keyword">proc</span><span class="title"> newConnection</span> &#123; sock addr port &#125; &#123;</div><div class="line"><span class="comment">     # 打印出来连接信息</span></div><div class="line">     <span class="keyword">puts</span> get_one_client </div><div class="line">     <span class="keyword">puts</span> $addr</div><div class="line">     <span class="keyword">puts</span> $port </div><div class="line"><span class="comment">     # socket以行模式 无阻塞 接收数据</span></div><div class="line">     <span class="keyword">fconfigure</span> $sock -blocking no -buffering line</div><div class="line"></div><div class="line"><span class="comment">     # 当socket可读时 调用handleData函数</span></div><div class="line">     <span class="keyword">fileevent</span> $sock readable [ <span class="keyword">list</span> handleData $sock ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">proc</span><span class="title"> handleData</span> &#123; sock &#125; &#123;</div><div class="line"><span class="comment">     # 保存client socket传来的数据到info变量,并打印出来info</span></div><div class="line">     <span class="keyword">set</span> <span class="keyword">info</span> [ <span class="keyword">gets</span> $sock ]</div><div class="line">     <span class="keyword">puts</span> $info</div><div class="line"></div><div class="line"><span class="comment">     # 将info写入client socket</span></div><div class="line">     <span class="keyword">puts</span> $sock $info</div><div class="line"></div><div class="line"><span class="comment">     # 到EOF 关闭socket</span></div><div class="line">     <span class="keyword">if</span> &#123; [ <span class="keyword">eof</span> $sock ] &#125; &#123;</div><div class="line">        <span class="keyword">close</span> $sock</div><div class="line">     &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># 设置端口</span></div><div class="line"><span class="keyword">set</span> port [ <span class="keyword">lindex</span> $argv <span class="number">0</span> ]</div><div class="line"><span class="keyword">socket</span> -server newConnection $port</div><div class="line"></div><div class="line"><span class="comment"># 一直运行</span></div><div class="line"><span class="keyword">vwait</span> forever</div><div class="line"></div></pre></td></tr></table></figure>
<p>语法还是很简练的，可以使用以下的Python代码测试连接服务器:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#coding=utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> threading</div><div class="line"><span class="keyword">import</span> socket</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span><span class="params">(threading.Thread)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line"></div><div class="line">        msg = <span class="string">"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Expedita repudiandae, \</span></div><div class="line">        laborum non officiis. Ratione debitis sapiente nesciunt, quas dolore, magni aspernatur \</div><div class="line">        ipsum numquam error quae eligendi aliquid adipisci omnis in.\n"</div><div class="line"></div><div class="line">        <span class="keyword">try</span>:</div><div class="line">            sock = socket.socket()</div><div class="line">            sock.connect((<span class="string">'localhost'</span>, <span class="number">12345</span>))</div><div class="line">            sock.send(msg)</div><div class="line">            res = sock.recv(<span class="number">2048</span>)</div><div class="line">            <span class="keyword">print</span> res</div><div class="line">            sock.close()</div><div class="line">            </div><div class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> error:</div><div class="line">            <span class="keyword">print</span> error</div><div class="line">            sock.close()</div><div class="line"></div><div class="line">        time.sleep(<span class="number">10</span>)</div><div class="line">        </div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></div><div class="line">    <span class="keyword">print</span> <span class="string">"Start main threading"</span></div><div class="line">    </div><div class="line">    threads = [MyThread() <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">300000</span>)]</div><div class="line"></div><div class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> threads:</div><div class="line">        t.start()</div><div class="line"></div><div class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> threads:</div><div class="line">        t.join()</div><div class="line"></div><div class="line">    <span class="keyword">print</span> <span class="string">"End Main threading"</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    main()</div></pre></td></tr></table></figure></p>
<p>运行时需要将server运行于12345端口。然后运行python echo_client.py就可以了。<br>可以看出简单几行Tcl代码，实现的功能还不少(可以异步处理TCP请求)。</p>
<p>三行实现一个简单的时间显示GUI程序:</p>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/wish</span></div><div class="line"></div><div class="line"><span class="keyword">proc</span><span class="title"> every</span> &#123;ms body&#125; &#123;<span class="keyword">eval</span> $body; <span class="keyword">after</span> $ms [<span class="keyword">info</span> level <span class="number">0</span>]&#125;</div><div class="line">pack [label .<span class="keyword">clock</span> -textvar <span class="keyword">time</span>]</div><div class="line">every <span class="number">1000</span> &#123;<span class="keyword">set</span> ::<span class="keyword">time</span> [<span class="keyword">clock</span> <span class="keyword">format</span> [<span class="keyword">clock</span> sec] -<span class="keyword">format</span> %H:%M:%S]&#125;</div><div class="line"></div></pre></td></tr></table></figure>
<p>虽然以上代码还不能完全理解，但是也能猜个大概，以后慢慢熟悉。<br>这里tclsh和wish都是Tcl语言的交互解释器，wish提供了一个GUI环境，可以通过简单代码构建带有图形界面的窗口应用。</p>
<p>下面通过几个示例脚本初步了解下Tcl的语法:</p>
<p>hello.tcl:<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/tclsh</span></div><div class="line"></div><div class="line"><span class="keyword">expr</span> <span class="number">2</span>*<span class="number">10</span> - <span class="number">1</span><span class="comment">;   # expr计算表达式的值</span></div><div class="line"><span class="keyword">expr</span> <span class="number">2</span>**<span class="number">10</span> + <span class="number">1</span>;</div><div class="line"><span class="keyword">puts</span> bye<span class="comment">;        # 输出bye</span></div><div class="line"><span class="keyword">puts</span> <span class="string">"\a"</span><span class="comment">;       # 警告音</span></div><div class="line"><span class="keyword">exit</span> <span class="number">1</span><span class="comment">;          # exit 1退出</span></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>一个计算阶乘的实例:</p>
<p>factorial.tcl:<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/bin/sh</span></div><div class="line"><span class="comment">#Tcl ingores the next line but 'sh' doesn't \</span></div><div class="line"><span class="keyword">exec</span> tclsh <span class="string">"$0"</span> <span class="string">"$@"</span></div><div class="line"></div><div class="line"><span class="keyword">proc</span><span class="title"> factorial</span> &#123;val&#125; &#123;</div><div class="line">    <span class="keyword">set</span> result <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> &#123;$val &gt; <span class="number">0</span>&#125; &#123;</div><div class="line">        <span class="keyword">set</span> result [<span class="keyword">expr</span> $result*$val]</div><div class="line">        <span class="keyword">incr</span> val <span class="number">-1</span>                     # <span class="keyword">incr</span>自增变量 <span class="number">-1</span>为增量</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> $result</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">puts</span> [factorial <span class="number">10</span>]                     # 使用方括号调用函数</div><div class="line"><span class="keyword">puts</span> [factorial <span class="number">1</span>]</div><div class="line"><span class="keyword">puts</span> [factorial <span class="number">20</span>]</div><div class="line"><span class="keyword">puts</span> [factorial <span class="number">50</span>]</div></pre></td></tr></table></figure></p>
<p>最简单GUI应用(一个按钮，点击退出)<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/wish</span></div><div class="line"></div><div class="line">button .b -text <span class="string">"hello world!"</span> -command <span class="string">"puts bye\a; exit"</span></div><div class="line">pack .b</div><div class="line"></div></pre></td></tr></table></figure></p>
<p>这里.b类似HTML中的id，-text参数类似HTML中的button元素上的内容 -command 参数是点击按钮时候的效果，这里打印出bye和警告音，然后退出。</p>
<p>一个计算阶乘的GUI应用<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/bin/sh</span></div><div class="line"><span class="comment">#Tcl ingores the next line but 'sh' doesn't \</span></div><div class="line"><span class="keyword">exec</span> wish <span class="string">"$0"</span> <span class="string">"$@"</span></div><div class="line"></div><div class="line"><span class="keyword">proc</span><span class="title"> factorial</span> &#123;val&#125; &#123;</div><div class="line">    <span class="keyword">set</span> result <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> &#123;$val&gt;<span class="number">0</span>&#125; &#123;</div><div class="line">        <span class="keyword">set</span> result [<span class="keyword">expr</span> $result*$val]</div><div class="line">        <span class="keyword">incr</span> val <span class="number">-1</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> $result</div><div class="line">&#125;</div><div class="line"></div><div class="line">entry .value -width <span class="number">6</span> -relief sunken -textvariable value</div><div class="line">label .description -text <span class="string">"factorial is "</span></div><div class="line">label .result -textvariable result</div><div class="line"><span class="comment"># 按下时候 将result的值设置为[factorial $value]返回值</span></div><div class="line">button .calculate -text <span class="string">"Calculate"</span> -command &#123;<span class="keyword">set</span> result [factorial $value]&#125;</div><div class="line"></div><div class="line">button .exit_btn -text <span class="string">"Exit"</span> -command <span class="string">"puts exit; exit"</span></div><div class="line"></div><div class="line"><span class="comment"># 给.value元素绑定回车事件</span></div><div class="line">bind .value &lt;Return&gt; &#123;</div><div class="line">    .calculate flash</div><div class="line">    .calculate invoke</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment"># 将各个元素加入画板，并设置距离(类似CSS的padding)</span></div><div class="line">grid .value .description .result -padx <span class="number">1</span>m -pady <span class="number">1</span>m</div><div class="line">grid .calculate - - -padx <span class="number">1</span>m -pady <span class="number">1</span>m</div><div class="line">grid .exit_btn - - -padx <span class="number">1</span>m -pady <span class="number">2</span>m</div><div class="line"></div><div class="line"></div></pre></td></tr></table></figure></p>
<p>打印出来鼠标在画板的位置，如果按下键盘a字母输出信息”a is pushed”</p>
<p>position.tcl:<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/bin/sh</span></div><div class="line"><span class="comment">#Tcl ingores the next line but 'sh' doesn't \</span></div><div class="line"><span class="keyword">exec</span> wish <span class="string">"$0"</span> <span class="string">"$@"</span></div><div class="line"></div><div class="line">bind . &lt;Motion&gt; &#123;<span class="keyword">puts</span> <span class="string">"pointer at %x,%y"</span>&#125;</div><div class="line">bind . &lt;a&gt; &#123;<span class="keyword">puts</span> <span class="string">"a is pushed"</span>&#125;</div><div class="line"></div></pre></td></tr></table></figure></p>
<p>以下是一些小的代码片段组成的示例:</p>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/bin/sh</span></div><div class="line"><span class="comment">#Tcl ingores the next line but 'sh' doesn't \</span></div><div class="line"><span class="keyword">exec</span> tclsh <span class="string">"$0"</span> <span class="string">"$@"</span></div><div class="line"></div><div class="line"><span class="comment"># 输出表达式的值</span></div><div class="line"><span class="keyword">puts</span> [<span class="keyword">expr</span> sin(<span class="number">10</span>)]</div><div class="line"></div><div class="line"><span class="comment"># 定义变量num</span></div><div class="line"><span class="keyword">set</span> num <span class="number">11111</span></div><div class="line"><span class="keyword">puts</span> <span class="string">"num is $num"</span></div><div class="line"></div><div class="line"><span class="keyword">puts</span> [<span class="keyword">expr</span> $num % <span class="number">8</span>]</div><div class="line"></div><div class="line"><span class="comment"># index from 0</span></div><div class="line"><span class="keyword">puts</span> [<span class="keyword">lindex</span> &#123;red blue pink&#125; <span class="number">2</span>]</div><div class="line"></div><div class="line"><span class="keyword">set</span> length [<span class="keyword">string</span> length aaaaaaabbbbbb]</div><div class="line"><span class="keyword">puts</span> <span class="string">"length is $length"</span></div><div class="line"></div><div class="line"><span class="comment"># 变量替换</span></div><div class="line"><span class="keyword">set</span> a <span class="number">1</span></div><div class="line"><span class="keyword">set</span> b <span class="number">2</span></div><div class="line"><span class="keyword">puts</span> <span class="string">"$a+$b = [expr $a+$b]"</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 字符串中使用双引号</span></div><div class="line"><span class="keyword">set</span> name a.out</div><div class="line"><span class="keyword">set</span> msg <span class="string">"Counldn't open file \"$name\""</span></div><div class="line"><span class="keyword">puts</span> $msg</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 使用&#123;&#125;不转义$符号</span></div><div class="line"><span class="keyword">set</span> msg &#123;Eggs: $<span class="number">2.18</span>/dozen Apple: $<span class="number">3.09</span>/dozen&#125;</div><div class="line"><span class="keyword">puts</span> $msg</div><div class="line"></div><div class="line"><span class="keyword">proc</span><span class="title"> counter</span> &#123;value <span class="keyword">list</span>&#125; &#123;</div><div class="line">    <span class="keyword">set</span> count <span class="number">0</span> </div><div class="line">    <span class="keyword">foreach</span> el $list &#123;</div><div class="line">        <span class="keyword">if</span> $el==$value &#123;</div><div class="line">            <span class="keyword">incr</span> count</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> $count</div><div class="line">&#125;</div><div class="line"><span class="comment"># 调用counter函数</span></div><div class="line"><span class="keyword">puts</span> [counter <span class="number">1</span> &#123;<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">1</span> <span class="number">1</span> &#125;]</div><div class="line"><span class="comment"># glob函数</span></div><div class="line"><span class="keyword">puts</span> [<span class="keyword">glob</span> *.tcl]</div><div class="line"></div><div class="line"><span class="comment"># format 函数</span></div><div class="line"><span class="keyword">set</span> name color_blind</div><div class="line"><span class="keyword">set</span> greet [<span class="keyword">format</span> &#123;<span class="string">"%s"</span> said: hello world!&#125; $name]</div><div class="line"><span class="keyword">puts</span> $greet</div><div class="line"></div><div class="line"><span class="keyword">set</span> city <span class="string">"Los Angeles"</span></div><div class="line"><span class="keyword">set</span> bigcity $city</div><div class="line"><span class="keyword">puts</span> $city</div><div class="line"></div></pre></td></tr></table></figure>
<p>运行结果:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">-0.5440211108893699</div><div class="line">num is 11111</div><div class="line">7</div><div class="line">pink</div><div class="line">length is 13</div><div class="line">1+2 = 3</div><div class="line">Counldn&apos;t open file &quot;a.out&quot;</div><div class="line">Eggs: $2.18/dozen Apple: $3.09/dozen</div><div class="line">3</div><div class="line">clock.tcl echo_server.tcl factorial.tcl get_pos.tcl gui_factorial.tcl hello.tcl style_button.tcl try.tcl var_example.tcl</div><div class="line">&quot;color_blind&quot; said: hello world!</div><div class="line">Los Angeles</div></pre></td></tr></table></figure></p>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/Tcl/">#Tcl</a>
        </div>
    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>

</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    主题由 <a href="https://github.com/klugjo">Jonathan Klughertz</a> 开发设计
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2017/01/25/体验Tcl语言/">体验Tcl语言</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/01/21/网络编程-基本概念/">网络编程-基本概念</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/01/08/LeetCode-Count-and-say/">LeetCode_Count_and_say</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2016/12/30/Hello-World/">Hello_World</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    由 Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a> 强力驱动
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>